<!doctype html>
<html>
<head>
	<title>Reaction Time Game</title>
	
	<meta charset="utf-8" />
	<meta http-equiv="Content-type" content = "text/html; charset=utf-8" />
	<meta name = "viewport" content = "width=device-width,initial-scale=1" />
	
</head>
<style type = "text/css">
	body{
		font-family: Lucida Sans Unicode; Lucida Sans; sans-serif;
	}

	#box{
		background-color: #B464AE;
		width: 200px;
		height: 200px;
		position:relative;
	}
	.bold{
		font-weight:bold;
	}
</style>

<body>
	<h1>Test your reaction speed!</h1>
	
	<p>Click on the shape as quickly as you can</p>
	<p class="bold">Your Reaction time: <span id="yourtime"> </span>ms</p>
	<button id="Done">Show Results</button>
	<p id = "results"> </p>
	<div id = "box"></div>
		
	
	<script type="text/javascript">
	function getMaxOfArray(numArray) {
  	return Math.max.apply(null, numArray);
	}
	function getMinOfArray(numArray) {
  	return Math.min.apply(null, numArray);
	}

	//var colors = ["blue", "red","purple","pink","yellow","green","black","#B464AE"]
	function getRandomColor(){
		var code = '0123456789ABCDEF'.split('');
		var color = '#';
		for (var i = 0; i<6;i++){
			color+= code[Math.round(Math.random() *15)];
		}
		return color;
	}
	
	function getSum(total,num){
		return total+num;
	}
	var clickedTime; var createdTime = Date.now(); var reactionTime;
	var reactionTimeAll=[];
	var playing = true;
	
	function makeBox(){
		var time=Math.random()*5000;
		var positions = [Math.floor(Math.random()*400),Math.floor(Math.random()*400),Math.floor(Math.random()*400),Math.floor(Math.random()*400)];
		setTimeout(function() {
			//set it to randomly choose between box + circle shape
			if (Math.random()>0.5){
				document.getElementById("box").style.borderRadius="100px";
			} else{
				document.getElementById("box").style.borderRadius="0";
			}
			document.getElementById("box").style.backgroundColor=getRandomColor();
			document.getElementById("box").style.margin=positions[0]+"px "+positions[1]+"px "+positions[2]+"px "+positions[3]+"px";
			document.getElementById("box").style.display="block";
			createdTime=Date.now();
		}, time);
		}
	document.getElementById("box").onclick=function(){
			playing = true;
			clickedTime = Date.now();
			reactionTime = clickedTime-createdTime;
			reactionTimeAll = reactionTimeAll.concat(reactionTime); 
			document.getElementById("yourtime").innerHTML=reactionTime;
			this.style.display="none";
			makeBox();
		}; makeBox();
		document.getElementById("Done").onclick=function(){
		while (playing === true){
		reactTimes = reactionTimeAll;
		sumRTs = reactTimes.reduce(getSum);
		avRT = sumRTs/reactTimes.length;
		maxRT = getMaxOfArray(reactTimes);
		minRT = getMinOfArray(reactTimes);
		document.getElementById("results").innerHTML="Average RT: "+avRT+"\t"+"Best Time: "+minRT+"Worst Time: "+maxRT;
		//document.getElementById("Done").innerHTML="Play Again!";
		reactionTimeAll=[];
		playing = false;
		}
		};
	
	
	</script>
	
</body>
</html>